---
layout: post
title: maven
date: 2024-07-26
tags: [java]
author: chizzk
---
## maven
### 一.命令操作
<div align="center">
    <img src="https://bugstack.cn/images/roadmap/tutorial/road-map-230704-07.png?raw=true" width="550px">
</div>

- clean：清理，执行该命令会删除项目路径下的target文件，但是不会删除本地的maven仓库已经生成的jar文件。
- validate：验证，验证工程正确性，所需信息是否完整。
- complie：编译，java的识别文件是.class,编译生成class文件，编译命令，只编译选定的目标，不管之前是否已经编译过，会在你的项目路径下生成一个target目录，在该目录中包含一个classes文件夹，里面全是生成的class文件及字节码文件。
<br>与build的区别：只编译选定的目标，不管之前是否已经编译过。
- test： 测试，单元测试。
- package：打包，将工程文件打包为指定的格式，例如JAR,WAR等（POM文件中的packaging标签就是来指定打包类型的）。这个命令会在你的项目路径下一个target目录，并且拥有compile命令的功能进行编译，同时会在target目录下生成项目的jar/war文件。如果A项目依赖于B项目，
<br>打包B项目时，只会打包到B项目target下，编译A项目时就会报错，因为找不到依赖的B项目，说明A项目在本地仓库是没有找到它所依赖的B项目，这时就用到install命令。
- verify：核实，主要是对package检查是否有效，符合标准。
- install：安装，将包安装至本地仓库，以让其他项目依赖。该命令包含了package命令功能，不但会在项目路径下生成class文件和jar包，同时会在你的本地maven仓库生成jar文件，供其他项目使用（如果没有设置过maven本地仓库，一般在用户/.m2目录下。如果A项目依赖于B项目，
<br>那么install B项目时，会在本地仓库同时生成pom文件和jar文件，解决了上面打包package出错的问题）。
- build：建造，功能类似compile，区别是对整个项目进行编译。与compile区别及特点：是对整个工程进行彻底的重新编译，而不管是否已经编译过。build过程往往会生成发布包，这个具体要看对ide的配置了，build在实际中应用很少，因为开发时候基本不用，发布生产时候一般都用
<br>ANT等工具发布。build因为要全部编译，还要执行打包等额外工作，因此时间较长。
- site：站点，生成项目的站点文档。
- deploy：配置部署，复制到远程仓库。前提需要在工程POM和Maven里配置上相关的信息及账号。

### 二.构建配置
```text
<build>
    <finalName>项目名称</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        <!-- 统一设定POM版本信息插件 -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>versions-maven-plugin</artifactId>
            <version>2.7</version>
        </plugin>
    </plugins>
</build>
```
基本的构建配置：
- maven-compiler-plugin:指定构建版本
- maven-resources-plugin:构建资源
- versions-maven-plugin 用于统一设定工程的版本工具

### 三.POM文件解析
```text
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
 
  <groupId>com.mycompany.app</groupId>
  <artifactId>my-app</artifactId>
  <version>1.0-SNAPSHOT</version>
 
  <name>my-app</name>
  <!-- FIXME change it to the project's website -->
  <url>http://www.example.com</url>
 
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.compiler.target>1.7</maven.compiler.target>
  </properties>
 
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.11</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
 
  <build>
    <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->
       ... lots of helpful plugins
    </pluginManagement>
  </build>
</project>
```

- project: This is the top-level element in all Maven pom.xml files.
>project:project是所有pom.xml的根元素，它还声明了一些pom相关的命名空间及xsd元素。

- modelVersion: This element indicates what version of the object model this POM is using. The version of the model itself changes very infrequently but it is mandatory in order to ensure stability of use if and when the Maven developers deem it necessary to change the model.
>modelVersion:指定了当前pom模型的版本。

- groupId This element indicates the unique identifier of the organization or group that created the project. The groupId is one of the key identifiers of a project and is typically based on the fully qualified domain name of your organization. For example org.apache.maven.plugins is the designated groupId for all Maven plugins.
>groupId:定义项目属于哪个组，这个组往往和项目所在的组织或公司存在关联，一般是使用组织或公司的域名，如：com.jeckma.helloword

- artifactId This element indicates the unique base name of the primary artifact being generated by this project. The primary artifact for a project is typically a JAR file. Secondary artifacts like source bundles also use the artifactId as part of their final name. A typical artifact produced by Maven would have the form <artifactId>-<version>.<extension> (for example, myapp-1.0.jar).
>artifactId:定义了当前maven项目在组中唯一id，一般一个大项目组下面可能会包含多个子项目或子模块，而这个artifactId就是子项目或者子模块的名称。
- version This element indicates the version of the artifact generated by the project. Maven goes a long way to help you with version management and you will often see the SNAPSHOT designator in a version, which indicates that a project is in a state of development. We will discuss the use of snapshots and how they work further on in this guide.
>version：指定了这个项目当前的版本
- name This element indicates the display name used for the project. This is often used in Maven's generated documentation.
>name:name元素声明了一个对于用户更为友好的项目名称，方便后期的管理
- url This element indicates where the project's site can be found. This is often used in Maven's generated documentation.

- properties This element contains value placeholders accessible anywhere within a POM.
>properties：指定了maven的一些重要属性，
- dependencies This element's children list dependencies. The cornerstone of the POM.
>dependencies：这个元素的子列表依赖，pom文件的基础。
- build This element handles things like declaring your project's directory structure and managing plugins.


### 四.dependencies依赖
- dependencyManagement：The dependencies specified here are not used until they are referenced in a POM within the group. This allows the specification of a "standard" version for a particular dependency.
> （许多）此处指定的依赖项在组内的POM中引用之前不会使用。这允许为特定依赖项指定“标准”版本。
- dependency：
